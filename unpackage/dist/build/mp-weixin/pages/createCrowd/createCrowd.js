(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/createCrowd/createCrowd"],{"53ed":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("4795"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,a,r,o,i){try{var s=t[o](i),c=s.value}catch(u){return void n(u)}s.done?e(c):Promise.resolve(c).then(a,r)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function s(t){o(i,a,r,s,c,"next",t)}function c(t){o(i,a,r,s,c,"throw",t)}s(void 0)}))}}var s={data:function(){return{initData:[],avatarData:{status:!0,image:""},crowdName:"",members:[],disableInsertCrowdEvent:!1}},onShow:function(){this.initDataEvent()},methods:{backEvent:function(){t.navigateBack({delta:1})},avatarEvent:function(){var e=this;return i(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.disableAvatarEvent=!0,n.next=3,t.chooseImage({count:1,success:function(t){e.avatarData.status=!1,e.avatarData.image=t.tempFilePaths[0]}});case 3:case"end":return n.stop()}}),n)})))()},initDataEvent:function(){var e=this;return i(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.request({method:"POST",url:e.$baseURL+"fanList",data:null,header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}});case 2:r=n.sent[1].data,200===r.status?e.initData=r.data:t.showToast({title:"初始化数据异常，请重试",icon:"none"});case 4:case"end":return n.stop()}}),n)})))()},selectEvent:function(t){var e=this.members.indexOf(t);-1===e?this.members.push(t):this.members.splice(e,1)},insertCrowdEvent:function(){var e=this;this.disableInsertCrowdEvent=!0,t.uploadFile({url:this.$baseURL+"insertCrowd",filePath:this.avatarData.image,name:"image",formData:{crowdName:this.crowdName,members:this.members},header:{Authorization:"".concat(t.getStorageSync("token"))},success:function(n){var a=JSON.parse(n.data);t.request({method:"POST",url:e.$baseURL+"insertMessageBox",data:JSON.stringify({information:a.data,mode:0}),header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}}).then((function(n){var r=n[1].data;200===r.status?t.request({method:"POST",url:e.$baseURL+"insertMessageBox",data:JSON.stringify({information:a.data,mode:3,members:e.members}),header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}}).then((function(n){var r=n[1].data;200===r.status?(t.$on("fromContact",(function(){t.$emit("toContact",{data:a.data,mode:"crowd"}),t.$off("fromContact")})),t.redirectTo({url:"../contact/contact",success:function(){e.disableInsertCrowdEvent=!1}}),t.$emit("reloadMessage"),t.$emit("reloadRelation")):(e.disableInsertCrowdEvent=!1,t.showToast({title:"创建群组异常，请重试",icon:"none"}))})):t.showToast({title:"创建群组异常，请重试",icon:"none"})}))},fail:function(t){console.log(t)}})}}};e.default=s}).call(this,n("543d")["default"])},7712:function(t,e,n){},7819:function(t,e,n){"use strict";var a,r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.initData,(function(e,n){var a=t.members.indexOf(e.id);return{$orig:t.__get_orig(e),g0:a}})));t._isMounted||(t.e0=function(e){!t.disableInsertCrowdEvent&&(""!==t.avatarData.image&&""!==t.crowdName&&t.insertCrowdEvent())}),t.$mp.data=Object.assign({},{$root:{l0:n}})},o=[];n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}))},"8b5f":function(t,e,n){"use strict";var a=n("7712"),r=n.n(a);r.a},a4a9:function(t,e,n){"use strict";n.r(e);var a=n("53ed"),r=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=r.a},c83a:function(t,e,n){"use strict";(function(t){n("ff24");a(n("66fd"));var e=a(n("f66c"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},f66c:function(t,e,n){"use strict";n.r(e);var a=n("7819"),r=n("a4a9");for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n("8b5f");var i,s=n("f0c5"),c=Object(s["a"])(r["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],i);e["default"]=c.exports}},[["c83a","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/crowdInvite/crowdInvite"],{"0eab":function(t,n,e){"use strict";(function(t){e("ff24");r(e("66fd"));var n=r(e("5e15"));function r(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},2213:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("4795"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=i(t))){var n=0,e=function(){};return{s:e,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function i(t,n){if(t){if("string"===typeof t)return u(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,n):void 0}}function u(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function c(t,n,e,r,o,a,i){try{var u=t[a](i),c=u.value}catch(s){return void e(s)}u.done?n(c):Promise.resolve(c).then(r,o)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){c(a,r,o,i,u,"next",t)}function u(t){c(a,r,o,i,u,"throw",t)}i(void 0)}))}}var f={data:function(){return{crowdInfo:{},initData:[],crowdName:"",members:[],disableCrowdInviteEvent:!1}},onShow:function(){var n=this;t.$on("toCrowdInvite",(function(e){n.crowdInfo=e,t.$off("toCrowdInvite")})),t.$emit("fromCrowdInvite"),this.initDataEvent()},methods:{backEvent:function(){t.navigateBack({delta:1})},initDataEvent:function(){var n=this;return s(r.default.mark((function e(){var o;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.request({method:"POST",url:n.$baseURL+"fanList",data:JSON.stringify({crowdId:n.crowdInfo.id}),header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}});case 2:o=e.sent[1].data,200===o.status?n.initData=o.data:t.showToast({title:"初始化数据异常，请重试",icon:"none"});case 4:case"end":return e.stop()}}),e)})))()},selectEvent:function(t){var n=this.members.indexOf(t);-1===n?this.members.push(t):this.members.splice(n,1)},crowdInviteEvent:function(){var n=this;return s(r.default.mark((function e(){var o,i,u,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.disableCrowdInviteEvent=!0,e.next=3,t.request({method:"POST",url:n.$baseURL+"insertAnnouncement",data:JSON.stringify({memberList:n.members,crowdId:n.crowdInfo.id,announcementType:2}),header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}});case 3:if(o=e.sent[1].data,200===o.status){i=a(n.members);try{for(i.s();!(u=i.n()).done;)c=u.value,n.$socket.emit("insertAnnouncement",c)}catch(r){i.e(r)}finally{i.f()}n.disableCrowdInviteEvent=!1,t.navigateBack({delta:1}),t.showToast({title:"邀请成功",icon:"none"})}else n.disableCrowdInviteEvent=!1,t.showToast({title:"邀请异常，请重试",icon:"none"});case 5:case"end":return e.stop()}}),e)})))()}}};n.default=f}).call(this,e("543d")["default"])},4941:function(t,n,e){},"5e15":function(t,n,e){"use strict";e.r(n);var r=e("8462"),o=e("bf44");for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);e("91bf");var i,u=e("f0c5"),c=Object(u["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],i);n["default"]=c.exports},8462:function(t,n,e){"use strict";var r,o=function(){var t=this,n=t.$createElement,e=(t._self._c,t.__map(t.initData,(function(n,e){var r=t.members.indexOf(n.id);return{$orig:t.__get_orig(n),g0:r}})));t._isMounted||(t.e0=function(n){!t.disableCrowdInviteEvent&&(0!==t.members.length&&t.crowdInviteEvent())}),t.$mp.data=Object.assign({},{$root:{l0:e}})},a=[];e.d(n,"b",(function(){return o})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return r}))},"91bf":function(t,n,e){"use strict";var r=e("4941"),o=e.n(r);o.a},bf44:function(t,n,e){"use strict";e.r(n);var r=e("2213"),o=e.n(r);for(var a in r)"default"!==a&&function(t){e.d(n,t,(function(){return r[t]}))}(a);n["default"]=o.a}},[["0eab","common/runtime","common/vendor"]]]);
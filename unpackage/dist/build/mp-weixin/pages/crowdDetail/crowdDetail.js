(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/crowdDetail/crowdDetail"],{"0e49":function(t,n,o){"use strict";o.r(n);var e=o("5aa8"),a=o("de7d");for(var r in a)"default"!==r&&function(t){o.d(n,t,(function(){return a[t]}))}(r);o("a455");var i,c=o("f0c5"),d=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],i);n["default"]=d.exports},"5aa8":function(t,n,o){"use strict";var e,a=function(){var t=this,n=t.$createElement;t._self._c;t._isMounted||(t.e0=function(n){!t.disableToCrowdInvite&&t.toCrowdInvite()},t.e1=function(n){t.isCrowdOwner&&t.toUpdateInformationEvent("crowdName")},t.e2=function(n){t.isCrowdOwner&&t.toUpdateInformationEvent("announcement")},t.e3=function(n){t.isMember&&t.toUpdateInformationEvent("crowdNickname")},t.e4=function(n){t.isMember&&t.toContact()})},r=[];o.d(n,"b",(function(){return a})),o.d(n,"c",(function(){return r})),o.d(n,"a",(function(){return e}))},"6ae5":function(t,n,o){},"720b":function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=r(o("4795")),a=r(o("eb47"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t,n,o,e,a,r,i){try{var c=t[r](i),d=c.value}catch(u){return void o(u)}c.done?n(d):Promise.resolve(d).then(e,a)}function c(t){return function(){var n=this,o=arguments;return new Promise((function(e,a){var r=t.apply(n,o);function c(t){i(r,e,a,c,d,"next",t)}function d(t){i(r,e,a,c,d,"throw",t)}c(void 0)}))}}var d={data:function(){return{myInfo:getApp().globalData.myInformation,crowdId:-1,crowdInfo:{},myCrowdNickname:"",isMember:!1,isCrowdOwner:!1,disableToCrowdInvite:!1}},onLoad:function(){var n=this;t.$on("toCrowdDetail",(function(o){n.crowdId=o.id,n.initData(),t.$off("toCrowdDetail")})),t.$emit("fromCrowdDetail"),t.$on("reloadCrowdDetail",(function(){n.initData()}))},methods:{backEvent:function(){t.navigateBack({delta:1})},initData:function(){var n=this;return c(e.default.mark((function o(){var r;return e.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,t.request({method:"POST",url:n.$baseURL+"getCrowdDetail",data:JSON.stringify({crowdId:n.crowdId}),header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}});case 2:r=o.sent[1].data,200===r.status?(r.data.createdAt=(0,a.default)(r.data.createdAt),n.crowdInfo=r.data,1===n.crowdInfo.members.filter((function(t){return t.id===n.myInfo.id})).length&&(n.isMember=!0,n.myCrowdNickname=n.crowdInfo.members.filter((function(t){return t.id===n.myInfo.id}))[0].crowdNickname,n.isCrowdOwner=n.crowdInfo.ownerId===n.myInfo.id)):t.showToast({title:"初始化数据异常，请重试",icon:"none"});case 4:case"end":return o.stop()}}),o)})))()},toUpdateInformationEvent:function(n){t.navigateTo({url:"../updateInformation/updateInformation?mode=".concat(n,"&crowdId=").concat(this.crowdId,"&pl=").concat("crowdName"===n?this.crowdInfo.crowdName:"announcement"===n?this.crowdInfo.announcement:this.myCrowdNickname)})},toContact:function(){var n=this;return c(e.default.mark((function o(){var a;return e.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n.disableToContactEvent=!0,o.next=3,t.request({method:"POST",url:n.$baseURL+"insertMessageBox",data:JSON.stringify({information:n.crowdInfo,mode:0}),header:{"Content-Type":"application/json;charset=utf-8",Authorization:"".concat(t.getStorageSync("token"))}});case 3:a=o.sent[1].data,200===a.status?(t.$on("fromContact",(function(){t.$emit("toContact",{data:n.crowdInfo,mode:"crowd"}),t.$off("fromContact")})),t.redirectTo({url:"../contact/contact",complete:function(){n.disableToContactEvent=!1}})):t.showToast({title:"插入消息盒子异常，请重试",icon:"none"});case 5:case"end":return o.stop()}}),o)})))()},toCrowdInvite:function(){var n=this;this.disableToCrowdInvite=!0,t.$on("fromCrowdInvite",(function(){t.$emit("toCrowdInvite",n.crowdInfo),t.$off("fromCrowdInvite")})),t.navigateTo({url:"../crowdInvite/crowdInvite",complete:function(){n.disableToCrowdInvite=!1}})}}};n.default=d}).call(this,o("543d")["default"])},a455:function(t,n,o){"use strict";var e=o("6ae5"),a=o.n(e);a.a},de7d:function(t,n,o){"use strict";o.r(n);var e=o("720b"),a=o.n(e);for(var r in e)"default"!==r&&function(t){o.d(n,t,(function(){return e[t]}))}(r);n["default"]=a.a},ff04:function(t,n,o){"use strict";(function(t){o("ff24");e(o("66fd"));var n=e(o("0e49"));function e(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,o("543d")["createPage"])}},[["ff04","common/runtime","common/vendor"]]]);